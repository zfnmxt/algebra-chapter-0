\documentclass[a4paper]{report}

\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{enumitem}
\usepackage[sc]{mathpazo}
\linespread{1.05}        
\usepackage[margin=1.25in, marginparwidth=2in]{geometry}
\newenvironment{ex}[1]
    {\noindent{\large \bf Exercise #1.}}{\vspace{0.5cm}}

\begin{document}
\begin{ex}{1.2}
  Let $\sim$ be an equivalence relation on a set $S$. We need to show that $\mathcal{P}_\sim$ is a
  set of non-empty disjoint sets whose union is $S$. Non-emptiness is easy: since $\sim$ is an
  equivalence relation, $a \sim a$ for all $a \in S$ and we conclude $a \in [a]_\sim$ by the
  definition of $[a]_\sim$.

  Disjointness takes a bit more work. If $S = \varnothing$, then $P_\sim = \{\}$ is trivially
  disjoint. Similarly, if $S = \{a\}$, then $P = \{[a]_\sim\} = \{\{a\}\}$ is disjoint. 

  So, we now assume $|S| \geq 2$ and let $r, s \in S$ be distinct. For a contradiction, suppose that
  there exists $c \in S$ and distinct $[r]_\sim, [s]_\sim \in \mathcal{P}_\sim$ such that $c \in
  [r]_\sim$ and $c\in [s]_\sim$. Hence, $c \sim r$ and $c \sim s$. By the symmetry and transitivity
  of $\sim$, $r \sim s$ and $s \sim r$. But this means that for any $x \in [r]_\sim$ and any $y \in
  [s]_\sim$, we have $x \sim r$ from which it follows by transitivity that $x \sim s$ and,
  similarly, $y \sim s$, from which it follows that $y \sim r$. We conclude that $[r]_\sim =
  [s]_\sim$; by contradiction, $[r]_\sim, [s]_\sim$ must be disjoint.

  Finally, suppose there exists $c \in S$ such that $c \notin \mathcal{P}_\sim$. But
  $[c]_\sim \in \bigcup_{x \in S} [x]_\sim$ and $c \in [c]_\sim$ so it must be the case
  that $\bigcup_{x \in S} [x]_\sim \subseteq S$. Now suppose that there exists $c \in \bigcup_{x \in S} [x]_\sim$
  with $c \notin S$. There then exists a $r \in S$ such that $c \in [r]_\sim$. But 
  \[
    [r]_\sim = \{s \in S| s \sim r\}
  \]
   so $c \in S$ and $S \subseteq \bigcup_{x \in S} [x]_\sim$. We conclude $S = \bigcup_{x
     \in S} [x]_\sim = \bigcup_{T \in P_{\sim}} T$ as required.
\end{ex}

\begin{ex}{1.3}
  Let $a, b \in S$. Define $\sim$ by
  \[
    a \sim b \Longleftrightarrow (\exists T \in \mathcal{P}_\sim)~a, b \in T
  \]
  All that's left is to show $\sim$ satisfies the required properties.
  \begin{itemize}
    \item reflexivity: Let $a \in S$. Since the union of the sets of $\mathcal{P}_\sim$ is equal to
      $S$, there exists $T \in \mathcal{P}_\sim$ with $a \in T$. Hence, $a \sim a$.
    \item symmetry: Let $a, b \in S$ and suppose $a \sim b$. Then $(\exists T \in
      \mathcal{P}_\sim)~a,b \in T$ from which we conclude $b \sim a$.
    \item transitivity: Let $a, b, c \in S$ and suppose $a \sim b, b \sim c$. Then, $(\exists T \in
      \mathcal{P}_\sim)~a,b \in T$ and $(\exists U \in \mathcal{P}_\sim)~b,c \in U$.  But since
      $\mathcal{P}_\sim$ consists of disjoint sets, $T = U$ since $b$ is in both of them. Hence, $c
      \in T$ and we conclude $a \sim c$.
  \end{itemize}
\end{ex}

\begin{ex}{1.5}
 Let $a, b \in \mathbb{N}$. Define $a~R~b$ by
 \[
   a~R~b \Longleftrightarrow |a - b| \leq 1
  \]
  $R$ is clearly reflexive: for all $a \in \mathbb{N}$, $|a - a| = 0 \leq 1$. $R$ is symmetric since
  $|x| = |-x|$ for any $x$. However, $R$ is \emph{not} transitive: let distinct $a, b, c \in
  \mathbb{N}$ and $a~R~b$ and $b~R~c$. Then, $|a - b| = 1$ (since $a \neq b$) and similarly $|b - c| = 1$. Hence,
  either $a - b = 1$ or $b - a = 1$. In the former case, $b - c = 1$ (since $c \neq a$) from which we conclude
  that $a - c = 2$ and in the later case, $c - b = 1$, and we have $c - a = 2$ again. Hence, $|a - c| = 2$ and thus
  $a~R~c$ does not hold.
\end{ex}

\begin{ex}{1.6}
  Showing $\sim$ satisfies the required properties:
  \begin{itemize}
  \item reflexivity: For all $a \in \mathbb{R}$, $a -a = 0 \in \mathbb{Z}$.
  \item symmetry: Let $a, b \in \mathbb{R}$. If $b - a \in \mathbb{Z}$, clearly $-(b - a) = a - b \in \mathbb{Z}$.
  \item transitivity: Let $a, b, c \in \mathbb{R}$ and suppose $a \sim b$ and $b \sim c$. Then $b-a \in \mathbb{Z}$ and $c - b \in \mathbb{Z}$. Since 
    $\mathbb{Z}$ is closed under addition, $c - a = (c-b) + (b - a) \in \mathbb{Z}$.

    $\sim$ relates $a,b \in \mathbb{R}$ if they have the same post-decimal representation.
  \end{itemize}
\end{ex}
\begin{ex}{2.1}
  A bijection $f : S \rightarrow S$ can be constructed iteratively as
  follows. Set $D = T = S$.  Choose $s_1 \in D, s_1' \in T$ and set
  $f(s_1) = s_1'$. Next, choose $s_2 \in D \setminus \{s_1\}, s_2' \in
  T \setminus \{s_1'\}$ and set $f(s_2) = s_2'$.  Next, choose $s_3
  \in D \setminus \{s_1, s_2\}, s_3' \in T \setminus \{s_1',s_2'\}$
  and set $f(s_3) = s_3'$.  Continue in this manner for $n$ steps.

  Clearly, $f$ is a bijection. If $s, s' \in S$, then $f(s) = f(s')
  \Rightarrow s = s'$ by construction.  Since the algorithm continues
  for $n$ steps and assigns $f$ a unique output for each step, $f$
  must also be surjective.  The algorithm allows for $n!$ different
  constructions of $f$: at iteration $i$, we have $(n-i + 1)$ possible
  choices to choose as the output of $f$ on the given input. The only
  question that remains is if there exists a bijection $g : S
  \rightarrow S$ which cannot be constructed in such a fashion.  But
  $g$ \emph{can} be constructed in such a fashion: for each $s \in S$,
  simply choose the target of $f$ as $g(s)$. This is always possible
  because $g$ is a bijection: for each $s' \in T$, there is an $s \in
  D$ such that $g(s)$ uniquely maps to it. (And hence if $s \in D
  \setminus \{s_1, \dots, s_m\}$ after $m$ iterations, $g(s) \in T
  \setminus \{s_1', \dots, s_m'\}$.) But such a construction means
  that $f = g$, which is a contradiction.

  We conclude that there are exactly $n!$ bijections from $S$ to $S$.
\end{ex}

\begin{ex}{2.2}

  $(\Longrightarrow)$ Suppose $f : A \rightarrow B$ has a right-inverse, then there exists a function $g : B \rightarrow A$  such that
  $f \circ g = \text{id}_B$. If we choose some $b \in B$, we have
  \[
    (f \circ g)(b) = f(g(b))  = \text{id}_B (b) = b
  \]
  So, for any $b \in B$, we have $g(b) \in A$ with $f(g(b)) = b$ which shows $f$ is indeed surjective.

  $(\Longleftarrow)$ Now suppose $f$ is surjective. We will construct a function $g : B \rightarrow A$ such that $f \circ g = \text{id}_B$.
  Define an equivalence relation $\sim$ by
  \[
    a \sim b \Longleftrightarrow f(a) = f(b)
    \]
    $\sim$ is clearly an equivalence relation (indeed, this is immediate by the fact that $=$ is an equivalence relation). By Exercise 1.2,
    $\mathcal{P}_\sim$ is a partition of $A$. Define $g$ as
    \[ g(b) = \text{choose any $c \in [a]_\sim$ with $f(a) = b$}
    \]
    such an $a$ is guaranteed to exist by the surjectivity of $g(b)$ and the ability to make such a choice is guaranteed by the axiom of choice.
    The only thing left is to show that $g$ is indeed a right-inverse of $f$. To do so, let $b \in B$ and suppose $g(b) = c$ for some $c \in A$. Then,
    \begin{align*}
      f(g(b)) = f(c) = b
    \end{align*}
    by the construction of $g$.
\end{ex}

\begin{ex}{2.3}
  Let $f : A \rightarrow B$ be a bijection with an inverse $f^{-1} : B \rightarrow A$. By definition,
  \[ f\circ f^{-1} = \text{id}_B \qquad f^{-1} \circ f = \text{id}_A
  \]
  but this means that $f$ must also be an of $f^{-1}$. By Corollary 2.2, $f^{-1}$ is a bijection.
  Now, also consider bijection $g : B \rightarrow C$. By the associativity of function composition,
  \begin{align*}
  (g \circ f) \circ (f^{-1} \circ g^{-1}) &= g \circ (f \circ (f^{-1}) \circ g^{-1} \\
                                        &= g \circ \text{id}_B \circ g^{-1} \\
                                        &= g \circ g^{-1} \\
                                        &= \text{id}_C 
  \end{align*}
  and
  \begin{align*}
  f^{-1} \circ g^{-1} \circ g \circ f &= f^{-1} \circ (g^{-1} \circ g) \circ f   \\
                                    &= f^{-1} \circ \text{id}_B \circ f  \\
                                    &= f^{-1} \circ f  \\
                                    &= \text{id}_A 
  \end{align*}
  By Corollarly 2.2 once again, $g \circ f$ is a bijection with inverse $f^{-1} \circ g^{-1}$.
\end{ex}

\begin{ex}{2.4}
  Consider some set of sets $S$.
  \begin{itemize}
  \item reflexivity: for all $A \in S$, we have $A \cong A$ (with $\text{id}_A : A \rightarrow A$ as the bijection).
  \item symmetry: Consider $A, B \in S$ and suppose $A \cong B$ which means there exists a bijection $f : A \rightarrow B$. By Exercise 2.3,
    $f^{-1} : B \rightarrow A$ is also a bijection and hence $B \cong A$.
  \item transitivity: Let $A, B, C, \in S$ and suppose $A \cong B$ and $B \cong C$, meaning there exists bijections $f : A \rightarrow B$ and
  $g : B \rightarrow C$. By Exercise 2.3, $g \circ f : A \rightarrow C$ is a bijection, and hence $A \cong C$.
  \end{itemize}
\end{ex}
\begin{ex}{2.5}
 A function $f : A \rightarrow B$ is an \emph{epimorphism} if for all sets $Z$ and all functions $g : Z \rightarrow B$, there exists $\alpha : Z \rightarrow A$ such that $f \circ \alpha = g$. The thing to prove is now that a function $f$ is surjective if and only if it is an epimorphism.

$(\Longrightarrow)$ Suppose $f$ is surjective. Define $\alpha : Z \rightarrow A$ as
\[
\alpha(z) = \text{$a$ where $f(a) = g(z)$}
\]
such an $a$ is always guaranteed to exist by the surjectivity of $f$. Now, consider an arbitrary $z \in Z$. We have,
\[
(f\circ \alpha)(z) = f(\alpha(z)) = g(z)
\]
as required.

$(\Longleftarrow)$ Suppose $f$ is an epimorphism and let $g = \text{id}_B$. Since $f$ is an epimorphism, there exists a function $\alpha : B \rightarrow A$
such that $f \circ \alpha = \text{id}_B$. But this means that $\alpha$ is a right-inverse of $f$, so by Proposition 2.1, $f$ is surjective.

 
\end{ex}
\end{document}
